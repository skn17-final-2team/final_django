{% extends "core/base.html" %}
{% load static %}

{% block title %}새 회의{% endblock %}

{% block extra_head %}
<link rel="stylesheet" href="{% static 'css/meeting_create.css' %}">
{% endblock %}

{% block content %}
<div class="meeting-create-page">
   <form method="post" enctype="multipart/form-data" class="meeting-form">
      {% csrf_token %}
     <div class="meeting-columns">
      <!-- ================= 왼쪽 컬럼 ================= -->
      <div class="meeting-left">
        <!-- 제목 -->
        <section class="field-section">
          <label for="id_title" class="field-label">제목</label>
          <input
            id="id_title"
            name="title"
            type="text"
            class="field-input"
            placeholder="회의 제목을 입력하세요"
            required
          />
        </section>

        <!-- 일시 / 장소 -->
        <section class="field-section field-row-2">
          <div class="field-group">
            <label for="id_meet_date_time" class="field-label">일시</label>
            <input
              id="id_meet_date_time"
              name="meet_date_time"
              type="datetime-local"
              class="field-input"
              required
            />
          </div>

          <div class="field-group">
            <label for="id_place" class="field-label">장소</label>
            <input
              id="id_place"
              name="place"
              type="text"
              class="field-input"
              placeholder="회의실을 입력하세요"
            />
          </div>
        </section>

        <!-- ================== 특화 도메인 선택 ================== -->
        <section class="domain-section">
          <div class="domain-header">
            <h2 class="domain-title">특화 도메인 선택</h2>
        </div>

        <div class="domain-body">
            <!-- 업로드 카드 (그대로 유지) -->
            <label class="domain-upload-card">
            <input
                type="file"
                name="domain_file"
                accept=".txt,.csv,.xlsx"
                class="domain-upload-input"
            />
            <div class="domain-upload-icon">+</div>
            <div class="domain-upload-texts">
                <div class="domain-upload-title">Upload File</div>
                <div class="domain-upload-sub">지원 형식: TXT / CSV / XLSX</div>
            </div>
            </label>

            <!-- 토글 + 모달 -->
            <div class="domain-toggle-wrapper" id="domain-toggle-wrapper">
            <button
                type="button"
                id="btn-domain-toggle"
                class="domain-toggle"
            >
                <span class="domain-toggle-icon"></span>
                <span class="domain-toggle-text">
                특화 도메인 선택하기 (최대 3개 선택 가능)
                </span>
            </button>

            <!-- 토글 눌렀을 때 뜨는 작은 모달 -->
            <div
                class="domain-modal"
                id="domain-modal"
            >
                <label class="domain-modal-item">
                <input
                    type="checkbox"
                    name="domains"
                    value="IT"
                    data-domain-checkbox
                />
                <span>IT</span>
                </label>
                <label class="domain-modal-item">
                <input
                    type="checkbox"
                    name="domains"
                    value="마케팅"
                    data-domain-checkbox
                />
                <span>마케팅</span>
                </label>
                <label class="domain-modal-item">
                <input
                    type="checkbox"
                    name="domains"
                    value="디자인"
                    data-domain-checkbox
                />
                <span>디자인</span>
                </label>
                <label class="domain-modal-item">
                <input
                    type="checkbox"
                    name="domains"
                    value="경영"
                    data-domain-checkbox
                />
                <span>경영</span>
                </label>
                <label class="domain-modal-item">
                <input
                    type="checkbox"
                    name="domains"
                    value="회계"
                    data-domain-checkbox
                />
                <span>회계</span>
                </label>
            </div>
            </div>
        </div>
        </section>
      </div>

      <!-- ================= 오른쪽 컬럼 ================= -->
      <div class="meeting-right">
        <!-- 참석자 선택 영역 -->
        <section class="attendee-section">
          <div class="attendee-header">
            <h2 class="attendee-title">참석자</h2>
            <p class="attendee-sub">
              조직도에서 참석자를 선택하여 오른쪽으로 이동시킬 수 있습니다.
            </p>
          </div>

          <div class="attendee-layout">
            <!-- 좌측: 조직 트리 -->
            <div class="attendee-tree">
              <ul class="tree-root">
                <li>
                  <span class="tree-label root-label">주식회사 말하는대로</span>
                  <ul>
                    <li><span class="tree-label">임원</span></li>
                    <li><span class="tree-label">HR 본부</span></li>
                    <li><span class="tree-label">마케팅 본부</span></li>
                    <li>
                      <span class="tree-label">IT 본부</span>
                      <ul>
                        <li>
                          <span class="tree-label">개발 부서</span>
                          <ul>
                            <li
                              class="tree-user"
                              data-user-id="kimdaero"
                              data-user-name="김대로 (IT - 개발)"
                            >
                              김대로 (IT - 개발)
                            </li>
                            <li
                              class="tree-user"
                              data-user-id="kimyoonki"
                              data-user-name="김윤기 (IT - 개발)"
                            >
                              김윤기 (IT - 개발)
                            </li>
                            <li
                              class="tree-user"
                              data-user-id="parkjihyun"
                              data-user-name="박지현 (IT - 개발)"
                            >
                              박지현 (IT - 개발)
                            </li>
                            <li
                              class="tree-user"
                              data-user-id="imyoorim"
                              data-user-name="임유림 (IT - 개발)"
                            >
                              임유림 (IT - 개발)
                            </li>
                            <li
                              class="tree-user"
                              data-user-id="yoonseohoo"
                              data-user-name="윤서후 (IT - 개발)"
                            >
                              윤서후 (IT - 개발)
                            </li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
              </ul>
            </div>

            <!-- 가운데: 선택 초기화 -->
            <div class="attendee-middle">
              <button
                type="button"
                class="btn-reset-attendee"
                id="btn-clear-attendees"
              >
                선택 초기화
              </button>
            </div>

            <!-- 우측: 선택된 참석자 리스트 -->
            <div class="attendee-selected">
              <div class="attendee-selected-header">
                <span class="attendee-selected-title">선택된 참석자</span>
                <span id="attendee-count" class="attendee-count-badge">0명</span>
              </div>
              <ul id="selected-attendee-list" class="attendee-list">
                <!-- JS에서 li 추가 -->
              </ul>
            </div>
          </div>
        </section>

        <!-- 비공개 회의 + 버튼 -->
        <section class="right-bottom">
          <div class="private-block">
            <label class="private-label">
              <span class="private-icon-wrapper">
                <!-- 단색 아이콘 대신 사각형 사용 -->
                <span class="private-icon"></span>
              </span>
              <span class="private-text-main">비공개 회의</span>
              <input
                type="checkbox"
                name="is_private"
                id="id_is_private"
                class="private-checkbox"
              />
            </label>
            <p class="private-desc">
              체크하지 않으면, 회의 참석자와 회의 참석자의 부서원 전체에게 회의가
              공개됩니다.
            </p>
          </div>

          <button type="submit" class="btn-start-meeting">
            회의 시작
          </button>
        </section>
      </div>
    </div>
    </form>
  </div>
</div>

{% endblock %}

{% block extra_script %}
<script src="{% static 'js/meeting_create.js' %}"></script>
{% endblock %}
